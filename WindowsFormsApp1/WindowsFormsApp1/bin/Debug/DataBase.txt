CREATE TABLE IF NOT EXISTS Users (ID INTEGER PRIMARY KEY AUTOINCREMENT,Username TEXT NOT NULL UNIQUE,Password TEXT NOT NULL,Role TEXT NOT NULL);
CREATE TABLE IF NOT EXISTS Problem (PID INTEGER PRIMARY KEY AUTOINCREMENT,ProName TEXT NOT NULL UNIQUE,ProText TEXT NOT NULL,ProCategory TEXT NOT NULL,IsTest INTEGER NOT NULL UNIQUE,Ans TEXT NOT NULL UNIQUE,Analysis TEXT NOT NULL UNIQUE,InputInformation TEXT NOT NULL UNIQUE,ChangeInformation TEXT NOT NULL UNIQUE);
CREATE TABLE IF NOT EXISTS HMK (HID INTEGER PRIMARY KEY AUTOINCREMENT,HName TEXT NOT NULL UNIQUE,HText TEXT NOT NULL,StartTime TEXT NOT NULL,EndTime INTEGER NOT NULL UNIQUE,InputInformation TEXT NOT NULL UNIQUE,ChangeInformation TEXT NOT NULL UNIQUE,IsTest INTEGER NOT NULL);
CREATE TABLE IF NOT EXISTS ProH (HID INTEGER PRIMARY KEY AUTOINCREMENT,PID INTEGER ,IsTest INTEGER NOT NULL,IID INTEGER,ClassID INTEGER);
CREATE TABLE IF NOT EXISTS Course (CourseID INTEGER PRIMARY KEY AUTOINCREMENT,CourseName TEXT NOT NULL,TeacherID INTEGER NOT NULL,StartTime TEXT NOT NULL,FOREIGN KEY (TeacherID) REFERENCES Users(ID));
CREATE TABLE IF NOT EXISTS CourseStudent (CourseID INTEGER NOT NULL,StudentID INTEGER NOT NULL,PRIMARY KEY (CourseID, StudentID),FOREIGN KEY (CourseID) REFERENCES Course(CourseID),FOREIGN KEY (StudentID) REFERENCES Users(ID));
CREATE TABLE IF NOT EXISTS Question (QID INTEGER PRIMARY KEY AUTOINCREMENT,AskerID INTEGER NOT NULL,Content TEXT NOT NULL,FOREIGN KEY (AskerID) REFERENCES Users(ID));
CREATE TABLE IF NOT EXISTS Answer (AID INTEGER PRIMARY KEY AUTOINCREMENT,QID INTEGER NOT NULL,ResponderID INTEGER NOT NULL,Content TEXT NOT NULL,FOREIGN KEY (QID) REFERENCES Question(QID),FOREIGN KEY (ResponderID) REFERENCES Users(ID));
CREATE TABLE IF NOT EXISTS CourseHMK (CourseID INTEGER NOT NULL,HID INTEGER NOT NULL,PRIMARY KEY (CourseID, HID),FOREIGN KEY (CourseID) REFERENCES Course(CourseID),FOREIGN KEY (HID) REFERENCES HMK(HID));